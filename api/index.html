
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.4">
    
    
      
        <title>The Skywalker API - Skywalker: A Parameter Study Tool for Box Models</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bb3983ee.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-skywalker-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Skywalker: A Parameter Study Tool for Box Models" class="md-header__button md-logo" aria-label="Skywalker: A Parameter Study Tool for Box Models" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Skywalker: A Parameter Study Tool for Box Models
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              The Skywalker API
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/eagles-project/skywalker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Skywalker: A Parameter Study Tool for Box Models" class="md-nav__button md-logo" aria-label="Skywalker: A Parameter Study Tool for Box Models" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Skywalker: A Parameter Study Tool for Box Models
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/eagles-project/skywalker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../input/" class="md-nav__link">
        Input Format (YAML)
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../output/" class="md-nav__link">
        Output Format (Python)
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          The Skywalker API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        The Skywalker API
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data Types
  </a>
  
    <nav class="md-nav" aria-label="Data Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#real-number-type" class="md-nav__link">
    Real number type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-types" class="md-nav__link">
    Interface types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-types" class="md-nav__link">
    Result types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-an-ensemble-and-settings" class="md-nav__link">
    Loading an Ensemble and Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-program-settings" class="md-nav__link">
    Applying Program Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-an-ensemble-member" class="md-nav__link">
    Processing an Ensemble Member
  </a>
  
    <nav class="md-nav" aria-label="Processing an Ensemble Member">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#looping-over-ensemble-members" class="md-nav__link">
    Looping over ensemble members
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-input-parameters" class="md-nav__link">
    Reading input parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-input-array-parameters" class="md-nav__link">
    Reading input array parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computing-output-parameters-from-input-parameters" class="md-nav__link">
    Computing output parameters from input parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-output-parameters" class="md-nav__link">
    Setting output parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-output-array-parameters" class="md-nav__link">
    Setting output array parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-ensemble-output" class="md-nav__link">
    Writing Ensemble Output
  </a>
  
    <nav class="md-nav" aria-label="Writing Ensemble Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    Miscellaneous
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#printing-a-banner" class="md-nav__link">
    Printing a banner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-the-ensembles-size" class="md-nav__link">
    Getting the ensemble's size
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../example/" class="md-nav__link">
        Example: Van der Waals Gas
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data Types
  </a>
  
    <nav class="md-nav" aria-label="Data Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#real-number-type" class="md-nav__link">
    Real number type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-types" class="md-nav__link">
    Interface types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#result-types" class="md-nav__link">
    Result types
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    Error Handling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-an-ensemble-and-settings" class="md-nav__link">
    Loading an Ensemble and Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-program-settings" class="md-nav__link">
    Applying Program Settings
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#processing-an-ensemble-member" class="md-nav__link">
    Processing an Ensemble Member
  </a>
  
    <nav class="md-nav" aria-label="Processing an Ensemble Member">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#looping-over-ensemble-members" class="md-nav__link">
    Looping over ensemble members
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-input-parameters" class="md-nav__link">
    Reading input parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reading-input-array-parameters" class="md-nav__link">
    Reading input array parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#computing-output-parameters-from-input-parameters" class="md-nav__link">
    Computing output parameters from input parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-output-parameters" class="md-nav__link">
    Setting output parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-output-array-parameters" class="md-nav__link">
    Setting output array parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-ensemble-output" class="md-nav__link">
    Writing Ensemble Output
  </a>
  
    <nav class="md-nav" aria-label="Writing Ensemble Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    Cleanup
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#miscellaneous" class="md-nav__link">
    Miscellaneous
  </a>
  
    <nav class="md-nav" aria-label="Miscellaneous">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#printing-a-banner" class="md-nav__link">
    Printing a banner
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-the-ensembles-size" class="md-nav__link">
    Getting the ensemble's size
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="the-skywalker-api">The Skywalker API</h1>
<p>Skywalker offers a simple interface for writing programs that operate on entire
ensembles. You can access everything in this interface by including the correct
C/C++ header file or using the appropriate Fortran module in your program.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">C</label><label for="__tabbed_1_2">C++</label><label for="__tabbed_1_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;skywalker.h&gt;</span><span class="cp"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;skywalker.hpp&gt;</span><span class="cp"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">use </span><span class="n">skywalker</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Skywalker is written in C, and the C interface is the source of truth for the
Fortran and C++ bindings. The Fortran <code>skywalker</code> module exposes all the same
types and functions as the C interface. The C++ interface wraps all of the C
types in a <code>skywalker.hpp</code> header file, exposing then in the <code>skywalker</code>
namespace.</p>
<p>A Skywalker program typically consists of the following parts:</p>
<ol>
<li>Ensemble and settings information are loaded from an input YAML file</li>
<li>Settings are used to configure the program to run the loaded ensemble</li>
<li>One by one, ensemble members are processed by the program. Ensemble input
   parameters are retrieved and used to run a simulation, and then ensemble
   output parameters are written and stored.</li>
<li>The resulting ensemble is written to a Python module. All input and output
   parameters are written and stored in a way that allows them to be
   programmatically accessed by a postprocessing script.</li>
</ol>
<p>Here we describe the types and functions you can use to assemble your own
Skywalker program.</p>
<h2 id="data-types">Data Types</h2>
<h3 id="real-number-type">Real number type</h3>
<p>Skywalker supports exactly one value type that stores real-valued ensemble
parameters. By default this type is a double-precision floating point number,
but it can be configured for single precision with the <code>SKYWALKER_PRECISION</code>
CMake variable.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">C</label><label for="__tabbed_2_2">C++</label><label for="__tabbed_2_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">sw_real_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">using</span><span class="w"> </span><span class="n">Real</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sw_real_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Skywalker precision (swp): real kind used by skywalker</span>
<span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">parameter</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">swp</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>In Fortran, the <code>swp</code> kind is used to store input parameters and output values,
and is set to either the <code>c_double</code> or <code>c_float</code> interoperable types defined
by the Fortran 2003 ISO C bindings.</p>
<p>The C interface also defines the following macros:</p>
<ul>
<li><code>SW_EPSILON</code>: the "machine epsilon" value, an upper bound on the relative
  relative approximation error due to rounding in floating point arithmetic.
  This maps either to <code>FLT_EPSILON</code> or <code>DBL_EPSILON</code> as defined in <code>float.h</code>,
  depending on Skywalker's precision.</li>
<li><code>SW_MIN</code>: the minimum representable floating point number. Maps to
  <code>FLT_MIN</code> or <code>DBL_MIN</code> as defined in <code>float.h</code>.</li>
<li><code>SW_MAX</code>: the maximum representable floating point number. Maps to
  <code>FLT_MAX</code> or <code>DBL_MAX</code> as defined in <code>float.h</code>.</li>
</ul>
<h3 id="interface-types">Interface types</h3>
<p>Each of the essential concepts in the library has an associated type.</p>
<ul>
<li>An <strong>Ensemble</strong> stores a set of input and output data for each of its members.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">C</label><label for="__tabbed_3_2">C++</label><label for="__tabbed_3_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_ensemble_t</span><span class="w"> </span><span class="n">sw_ensemble_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Ensemble</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Returns the settings associated with this ensemble.</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="n">Settings</span><span class="o">&amp;</span><span class="w"> </span><span class="n">settings</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Iterates over all ensemble members, applying the given function f to</span>
<span class="w">  </span><span class="c1">// each input/output pair.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Input</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">Output</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Returns the size of the ensemble (number of members).</span>
<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="nf">size</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Writes input and output data within the ensemble to a Python module stored</span>
<span class="w">  </span><span class="c1">// in the file with the given name.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">module_filename</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble_t</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="kt">c_ptr</span><span class="p">)</span><span class="w">       </span><span class="kd">::</span><span class="w"> </span><span class="n">ptr</span><span class="w"></span>
<span class="w">  </span><span class="kt">integer</span><span class="p">(</span><span class="kt">c_size_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">size</span><span class="w">  </span><span class="c">! number of members</span>
<span class="k">contains</span><span class="w"></span>
<span class="w">  </span><span class="c">! Iterates over ensemble members</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ensemble_next</span><span class="w"></span>
<span class="w">  </span><span class="c">! Writes a Python module containing input/output data to a file, halting</span>
<span class="w">  </span><span class="c">! on failure</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">write</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ensemble_write</span><span class="w"></span>
<span class="w">  </span><span class="c">! Writes a Python module containing input/output data to a file</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">write_module</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ensemble_write_module</span><span class="w"></span>
<span class="w">  </span><span class="c">! Destroys an ensemble, freeing all allocated resources. Use at the end of</span>
<span class="w">  </span><span class="c">! a driver program, or when a fatal error has occurred.</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">free</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ensemble_free</span><span class="w"></span>
<span class="k">end type </span><span class="n">ensemble_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<ul>
<li>The <strong>Settings</strong> type stores configuration data or metadata associated with
  your program and how it treats ensemble members. All of these data are strings
  that can be retrieved by name.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:3"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><input id="__tabbed_4_3" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">C</label><label for="__tabbed_4_2">C++</label><label for="__tabbed_4_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_settings_t</span><span class="w"> </span><span class="n">sw_settings_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Returns true if the setting with the given name exists within the given</span>
<span class="w">  </span><span class="c1">// settings instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">has</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Retrieves a (string-valued) setting with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings_t</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="kt">c_ptr</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">ensemble_ptr</span><span class="w"></span>
<span class="k">contains</span>
<span class="k">  procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">settings_has</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">settings_get</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get_param</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">settings_get_param</span><span class="w"></span>
<span class="k">end type</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<ul>
<li><strong>Ensemble member input</strong> is stored in a set of named ensemble parameters
  within a dedicated type. Input data cannot be modified--it can only be read.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="5:3"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><input id="__tabbed_5_3" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">C</label><label for="__tabbed_5_2">C++</label><label for="__tabbed_5_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_input_t</span><span class="w"> </span><span class="n">sw_input_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="n">Input</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Returns true if the input parameter with the given name exists within</span>
<span class="w">  </span><span class="c1">// the given input instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="nf">has</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Retrieves a (real-valued) parameter with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">Real</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Returns true if an input array parameter with the given name exists</span>
<span class="w">  </span><span class="c1">// within the given input instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="nf">has_array</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Retrieves a (real-valued) array parameter with the given name, throwing</span>
<span class="w">  </span><span class="c1">// an exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Real</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_array</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">input_t</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="kt">c_ptr</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">ensemble_ptr</span><span class="w"></span>
<span class="k">contains</span>
<span class="k">  procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_has</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_get</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get_param</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_get_param</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has_array</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_has_array</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get_array</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_get_array</span><span class="w"></span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">get_array_param</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">input_get_array_param</span><span class="w"></span>
<span class="k">end type </span><span class="n">input_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<ul>
<li><strong>Ensemble member output</strong> is also stored in a set of named ensemble
  parameters within a dedicated type. Unlike input data, output ensemble
  parameters can only be written.</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">C</label><label for="__tabbed_6_2">C++</label><label for="__tabbed_6_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_output_t</span><span class="w"> </span><span class="n">sw_output_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Output</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">  </span><span class="n">Output</span><span class="p">();</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Sets a (real-valued) parameter with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if not successful.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">Real</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Sets (real-valued) parameters with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if not successful.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Real</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">values</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">output_t</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="kt">c_ptr</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ptr</span><span class="w"></span>
<span class="k">contains</span><span class="w"></span>
<span class="w">  </span><span class="c">! Adds a named metric to the output data.</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">output_set</span><span class="w"></span>
<span class="w">  </span><span class="c">! Adds a vector of named metric to the output data.</span>
<span class="w">  </span><span class="k">procedure</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">set_array</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">output_set_array</span><span class="w"></span>
<span class="k">end type </span><span class="n">output_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Notice that many of the Fortran types are actually classes with bound
procedures with implementations, indicated by the <code>procedure =&gt; implementation</code>
Ñ•yntax. Below, we refer to the functions and subroutines that implement the
procedures. The <a href="https://github.com/eagles-project/skywalker/tree/main/examples">examples</a>
and <a href="https://github.com/eagles-project/skywalker/tree/main/src/tests">tests</a>
illustrate how these procedures are invoked, as this syntax is unfortunately not
very clear.</p>
<h3 id="result-types">Result types</h3>
<p>The C and Fortran interfaces define types that store the results of operations
like loading ensembles from input, fetching input parameters, and writing
output parameters. These "result" types contain information that can be used
for handling errors, and each type has <code>result_t</code> at the end of its name.</p>
<h2 id="error-handling">Error Handling</h2>
<p>The types in Skywalker's C interface contain fields that can be used to properly
handle any errors that occur while reading input or constructing ensembles:</p>
<ul>
<li><code>error_code</code>: an integer that identifies a specific type of error that you
  can use to programmatically handle error conditions. The integer can be
  compared with the fields in the <code>sw_error_code_t</code> enumerated type in
  <code>skywalker.h</code> or the integer parameters defined in the Fortran module.</li>
<li><code>error_message</code>: a descriptive error string that can be printed to tell a user
  what went wrong</li>
</ul>
<p>The Fortran interface offers similar result types with these same fields, but
also offers "shorthand" versions of functions that simply halt the program with
the Fortran <code>STOP</code> command when an error occurs.</p>
<p>The C++ interface does not define types to store the results of its functions.
Instead, it directly returns the data requested, throwing an exception (of type
<code>skywalker::Exception</code>, a subclass of <code>std::exception</code>) containing a string
description if any issue occurs.</p>
<p>The <a href="https://github.com/eagles-project/skywalker/tree/main/examples">examples</a>
and <a href="https://github.com/eagles-project/skywalker/tree/main/src/tests">tests</a>
in the repository demonstrate how these error handling mechanisms work in
their respective languages.</p>
<h2 id="loading-an-ensemble-and-settings">Loading an Ensemble and Settings</h2>
<p>You can load an ensemble and settings for your program from a YAML input
file with a single function call.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:3"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><input id="__tabbed_7_3" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">C</label><label for="__tabbed_7_2">C++</label><label for="__tabbed_7_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">sw_ensemble_result_t</span><span class="w"> </span><span class="nf">sw_load_ensemble</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">yaml_file</span><span class="p">,</span><span class="w"></span>
<span class="w">                                      </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">settings_block</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">skywalker</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">Ensemble</span><span class="o">*</span><span class="w"> </span><span class="nf">load_ensemble</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">yaml_file</span><span class="p">,</span><span class="w"></span>
<span class="w">                          </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">settings_block</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">function </span><span class="n">load_ensemble</span><span class="p">(</span><span class="n">yaml_file</span><span class="p">,</span><span class="w"> </span><span class="n">settings_block</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">e_result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">yaml_file</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">),</span><span class="w"> </span><span class="k">optional</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings_block</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">ensemble_result_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">e_result</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<ul>
<li><code>yaml_file</code> is the name of the YAML input file to be read. It can be
  an absolute or relative path to a file on disk.</li>
<li><code>settings_block</code> is the name of the block in the YAML file from which settings
  are read. This can be the name of your program, or just <code>"settings"</code> if you
  want a mneumonic name. This argument is optional: If this string is <code>NULL</code> or
  blank in C, or not given in C++ or Fortran, Skywalker does not attempt to read
  any settings from the file.</li>
</ul>
<p>Settings can be used to create a single YAML input file that defines ensembles
for several Skywalker programs (e.g. for cross validating different methods or
models). Each program can define its own settings in a program-specific block
whose name is indicated using the <code>settings_block</code> parameter.</p>
<p>The C and Fortran interfaces return a result that contains the ensemble and
settings, as well as error handling information.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">C</label><label for="__tabbed_8_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_ensemble_result_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="c1">// The settings associated with the driver program</span>
<span class="w">  </span><span class="n">sw_settings_t</span><span class="w"> </span><span class="o">*</span><span class="n">settings</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// The ensemble loaded (or NULL on failure)</span>
<span class="w">  </span><span class="n">sw_ensemble_t</span><span class="w"> </span><span class="o">*</span><span class="n">ensemble</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// An error code indicating any problems encountered loading the ensemble</span>
<span class="w">  </span><span class="c1">// (zero = success, non-zero = failure)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="c1">// A string describing any error encountered, or NULL if error_code == 0.</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error_message</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="n">sw_ensemble_result_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble_result_t</span><span class="w"></span>
<span class="w">  </span><span class="c">! The settings associated with the driver program</span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">settings_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings</span><span class="w"></span>
<span class="w">  </span><span class="c">! The ensemble loaded (if no error occurred)</span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">ensemble_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble</span><span class="w"></span>
<span class="w">  </span><span class="c">! The ensemble&#39;s type</span>
<span class="w">  </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">type</span><span class="w"></span>
<span class="w">  </span><span class="c">! An error code indicating any problems encountered loading the ensemble</span>
<span class="w">  </span><span class="c">! (zero = success, non-zero = failure)</span>
<span class="w">  </span><span class="kt">integer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">error_code</span><span class="w"></span>
<span class="w">  </span><span class="c">! A string describing any error encountered, or NULL if error_code == 0.</span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">error_message</span><span class="w"></span>
<span class="k">end type </span><span class="n">ensemble_result_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The C++ interface returns a pointer to an <code>Ensemble</code> instance. Settings are
available within this instance. If an error occurs, a <code>skywalker::Exception</code>
is thrown containing an error message string identical to the <code>error_message</code>
field of the result type returned by the C and Fortran interfaces.</p>
<h2 id="applying-program-settings">Applying Program Settings</h2>
<p>If your program can run in more than one configuration, you can select a
configuration using the data specified in the settings you've loaded. Settings
are stored in strings, and you can retrieve a setting by name from the settings
variable you've loaded.</p>
<p>Settings can be queried with a <code>has</code> function that returns true if a setting
with the given name is found and false otherwise.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:3"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">C</label><label for="__tabbed_9_2">C++</label><label for="__tabbed_9_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Returns true if the setting with the given name exists within the given</span>
<span class="c1">// settings instance, false otherwise.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">sw_settings_has</span><span class="p">(</span><span class="n">sw_settings_t</span><span class="w"> </span><span class="o">*</span><span class="n">settings</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Returns true if the setting with the given name exists within the given</span>
<span class="w">  </span><span class="c1">// settings instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">has</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Returns .true. if the setting with the given name exists within the given</span>
<span class="c">! settings instance, false otherwise.</span>
<span class="k">function </span><span class="n">settings_has</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">has</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">settings_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">logical</span><span class="p">(</span><span class="kt">c_bool</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>A setting with the given name can be fetched.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:3"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">C</label><label for="__tabbed_10_2">C++</label><label for="__tabbed_10_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Retrieves the setting with the given name.</span>
<span class="n">sw_settings_result_t</span><span class="w"> </span><span class="nf">sw_settings_get</span><span class="p">(</span><span class="n">sw_settings_t</span><span class="w"> </span><span class="o">*</span><span class="n">settings</span><span class="p">,</span><span class="w"></span>
<span class="w">                                     </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Retrieves a (string-valued) setting with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the setting with the given name, returning a result that can</span>
<span class="c">! be checked for errors that occur.</span>
<span class="k">function </span><span class="n">settings_get_param</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">s_result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">settings_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">settings_result_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">s_result</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Fetching a setting fails if a setting with the given name doesn't exist. The
C and Fortran interfaces define a result type that allows this situation to
be handled.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">C</label><label for="__tabbed_11_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_setting_result_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">         </span><span class="c1">// fetched value (if error_code == 0)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span><span class="w">            </span><span class="c1">// error code indicating success or failure</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error_message</span><span class="p">;</span><span class="w"> </span><span class="c1">// text description of error</span>
<span class="p">}</span><span class="w"> </span><span class="n">sw_settings_result_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings_result_t</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="k">value</span><span class="w">         </span><span class="c">! fetched value (if error_code == 0)</span>
<span class="w">  </span><span class="kt">integer</span><span class="w">            </span><span class="kd">::</span><span class="w"> </span><span class="n">error_code</span><span class="w">    </span><span class="c">! error code indicating success or failure</span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">error_message</span><span class="w"> </span><span class="c">! text description of error</span>
<span class="k">end type </span><span class="n">settings_result_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>On failure, the C++ interface throws a <code>skywalker::Exception</code> with a string
description identical to the <code>error_message</code> description in the C and Fortran
result types. For brevity, the Fortran interface also offers a function that
halts your program if a setting is not found:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:1"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the setting with the given name, halting the program if an</span>
<span class="c">! error occurs.</span>
<span class="k">function </span><span class="n">settings_get</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">str</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">settings_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">settings</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">str</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="processing-an-ensemble-member">Processing an Ensemble Member</h2>
<p>The bulk of your Skywalker program is concerned with processing each member of
an ensemble. To do this, you must</p>
<ul>
<li>loop over the ensemble, retrieving the input and output variables for each
  member</li>
<li>read input parameters from the member's input variable</li>
<li>use the input parameters to compute output.</li>
<li>set the output parameters in the member's output variable</li>
</ul>
<h3 id="looping-over-ensemble-members">Looping over ensemble members</h3>
<p>Skywalker handles the process of looping over the ensemble for you. In C and
Fortran, you can construct a loop that calls a function to get the input and
output parameters for each member, terminating when there are no members left.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">C</label><label for="__tabbed_13_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Iterates over the inputs and outputs in an ensemble, making them available</span>
<span class="c1">// one at a time for computation. This function returns true once for each</span>
<span class="c1">// member of an ensemble and false once the ensemble&#39;s members have been</span>
<span class="c1">// traversed. Use it as a predicate in a while loop in which inputs and outputs</span>
<span class="c1">// are processed.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">sw_ensemble_next</span><span class="p">(</span><span class="n">sw_ensemble_t</span><span class="w"> </span><span class="o">*</span><span class="n">ensemble</span><span class="p">,</span><span class="w"></span>
<span class="w">                      </span><span class="n">sw_input_t</span><span class="w"> </span><span class="o">**</span><span class="n">input</span><span class="p">,</span><span class="w"></span>
<span class="w">                      </span><span class="n">sw_output_t</span><span class="w"> </span><span class="o">**</span><span class="n">output</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Iterates over the inputs and outputs in an ensemble, making them available</span>
<span class="c">! one at a time for computation. This function returns true once for each</span>
<span class="c">! member of an ensemble and false once the ensemble&#39;s members have been</span>
<span class="c">! traversed. Use it as a predicate in a do while loop in which inputs and</span>
<span class="c">! outputs are processed.</span>
<span class="k">function </span><span class="n">ensemble_next</span><span class="p">(</span><span class="n">ensemble</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">next</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">ensemble_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="w">    </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">output_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">out</span><span class="p">)</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">output</span><span class="w"></span>
<span class="w">  </span><span class="kt">logical</span><span class="p">(</span><span class="kt">c_bool</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">next</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>In C++, you can write your own function that performs the processing, and pass
that function to a method on your <code>Ensemble</code> object. This executes your function
on the input and output data for each member. The function you define takes a
<code>const</code> reference to an <code>Input</code> object and a non-<code>const</code> reference to an
<code>Output</code> object, and returns nothing.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:1"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">C++</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Ensemble</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Iterates over all ensemble members, applying the given function f to</span>
<span class="w">  </span><span class="c1">// each input/output pair.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">process</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Input</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">Output</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The <a href="https://github.com/eagles-project/skywalker/tree/main/examples">examples</a>
and <a href="https://github.com/eagles-project/skywalker/tree/main/src/tests">tests</a>
illustrate how this is done.</p>
<h3 id="reading-input-parameters">Reading input parameters</h3>
<p>To read an input parameter from an ensemble member, you can retrieve its value
using its name.</p>
<p>It's easy to check whether the ensemble member has a given parameter:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">C</label><label for="__tabbed_15_2">C++</label><label for="__tabbed_15_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Returns true if a (scalar) input parameter with the given name exists</span>
<span class="c1">// within the given input instance, false otherwise.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">sw_input_has</span><span class="p">(</span><span class="n">sw_input_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Returns true if the input parameter with the given name exists within</span>
<span class="w">  </span><span class="c1">// the given input instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">has</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Returns .true. if the input parameter with the given name exists within the</span>
<span class="c">! given input instance, false otherwise.</span>
<span class="k">function </span><span class="n">input_has</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">has</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">logical</span><span class="p">(</span><span class="kt">c_bool</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Similarly, it's easy to fetch the parameter:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:3"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><input id="__tabbed_16_3" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">C</label><label for="__tabbed_16_2">C++</label><label for="__tabbed_16_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Retrieves the (scalar) input parameter with the given name.</span>
<span class="n">sw_input_result_t</span><span class="w"> </span><span class="nf">sw_input_get</span><span class="p">(</span><span class="n">sw_input_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Retrieves a (real-valued) parameter with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">Real</span><span class="w"> </span><span class="n">get</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the input parameter with the given name.</span>
<span class="k">function </span><span class="n">input_get_param</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">i_result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">input_result_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i_result</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Fetching a parameter fails if the parameter doesn't exist within the ensemble.
The C and Fortran interfaces return a result type that allows you to check
whether the operation succeeded.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:2"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">C</label><label for="__tabbed_17_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_input_result_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">sw_real_t</span><span class="w"> </span><span class="n">value</span><span class="p">;</span><span class="w">           </span><span class="c1">// fetched value (if error_code == 0)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span><span class="w">            </span><span class="c1">// error code indicating success or failure</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error_message</span><span class="p">;</span><span class="w"> </span><span class="c1">// text description of error</span>
<span class="p">}</span><span class="w"> </span><span class="n">sw_input_result_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">input_result_t</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">)</span><span class="w">       </span><span class="kd">::</span><span class="w"> </span><span class="k">value</span><span class="w">         </span><span class="c">! fetched value (if error_code == 0)</span>
<span class="w">  </span><span class="kt">integer</span><span class="p">(</span><span class="kt">c_int</span><span class="p">)</span><span class="w">     </span><span class="kd">::</span><span class="w"> </span><span class="n">error_code</span><span class="w">    </span><span class="c">! error code indicating success or failure</span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">error_message</span><span class="w"> </span><span class="c">! text description of error</span>
<span class="k">end type </span><span class="n">input_result_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>In C++, a <code>skywalker::Exception</code> is thrown in the case of failure, with an
error string identical to the <code>error_message</code> field of the corresponding C and
Fortran result types.</p>
<p>The Fortran interface also offers you a "shortcut" that directly fetches your
input parameter, halting your program with <code>STOP</code> on failure.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="18:1"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the input parameter with the given name, halting the program</span>
<span class="c">! on failure.</span>
<span class="k">function </span><span class="n">input_get</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">val</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="reading-input-array-parameters">Reading input array parameters</h3>
<p>Skywalker offers you the ability to work with arrays of real-valued input
parameters identified by a single name. These array parameters work the same as
their scalar counterparts. Their memory is managed by Skywalker, so there's no
need for you to perform any memory allocation.</p>
<p>As with scalar input parameters, you can check to see whether an input array
parameter exists within an ensemble member.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">C</label><label for="__tabbed_19_2">C++</label><label for="__tabbed_19_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Returns true if an input array parameter with the given name exists within</span>
<span class="c1">// the given input instance, false otherwise.</span>
<span class="kt">bool</span><span class="w"> </span><span class="nf">sw_input_has_array</span><span class="p">(</span><span class="n">sw_input_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Returns true if an input array parameter with the given name exists within</span>
<span class="w">  </span><span class="c1">// the given input instance, false otherwise.</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">has_array</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Returns .true. if an input array parameter with the given name exists within</span>
<span class="c">! the given input instance, false otherwise.</span>
<span class="k">function </span><span class="n">input_has_array</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">has</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">logical</span><span class="p">(</span><span class="kt">c_bool</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">has</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The process of retrieving input array parameters works the same way as it does
for scalar input parameters.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="20:3"><input checked="checked" id="__tabbed_20_1" name="__tabbed_20" type="radio" /><input id="__tabbed_20_2" name="__tabbed_20" type="radio" /><input id="__tabbed_20_3" name="__tabbed_20" type="radio" /><div class="tabbed-labels"><label for="__tabbed_20_1">C</label><label for="__tabbed_20_2">C++</label><label for="__tabbed_20_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Retrieves the (array-valued) input parameter with the given name.</span>
<span class="n">sw_input_array_result_t</span><span class="w"> </span><span class="nf">sw_input_get_array</span><span class="p">(</span><span class="n">sw_input_t</span><span class="w"> </span><span class="o">*</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Input</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Retrieves a (real-valued) array parameter with the given name, throwing an</span>
<span class="w">  </span><span class="c1">// exception if it doesn&#39;t exist.</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Real</span><span class="o">&gt;</span><span class="w"> </span><span class="n">get_array</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the input array parameter with the given name.</span>
<span class="k">function </span><span class="n">input_get_array_param</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="p">(</span><span class="n">i_result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">input_array_result_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">i_result</span><span class="w"></span>
<span class="k">end function</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The C and Fortran interface define result types for fetching input array
parameters.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="21:2"><input checked="checked" id="__tabbed_21_1" name="__tabbed_21" type="radio" /><input id="__tabbed_21_2" name="__tabbed_21" type="radio" /><div class="tabbed-labels"><label for="__tabbed_21_1">C</label><label for="__tabbed_21_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_input_array_result_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">sw_real_t</span><span class="w"> </span><span class="o">*</span><span class="n">values</span><span class="p">;</span><span class="w">         </span><span class="c1">// fetched values (if error_code == 0)</span>
<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w">               </span><span class="c1">// number of values (if error_code == 0)</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span><span class="w">            </span><span class="c1">// error code indicating success or failure</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error_message</span><span class="p">;</span><span class="w"> </span><span class="c1">// text description of error</span>
<span class="p">}</span><span class="w"> </span><span class="n">sw_input_array_result_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">input_array_result_t</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">),</span><span class="w"> </span><span class="k">dimension</span><span class="p">(:),</span><span class="w"> </span><span class="k">pointer</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="c">! fetched values (if error_code == 0)</span>
<span class="w">  </span><span class="kt">integer</span><span class="p">(</span><span class="kt">c_size_t</span><span class="p">)</span><span class="w">                   </span><span class="kd">::</span><span class="w"> </span><span class="n">size</span><span class="w">   </span><span class="c">! number of values (if error_code == 0)</span>
<span class="w">  </span><span class="kt">integer</span><span class="p">(</span><span class="kt">c_int</span><span class="p">)</span><span class="w">                      </span><span class="kd">::</span><span class="w"> </span><span class="n">error_code</span><span class="w">    </span><span class="c">! error code indicating success or failure</span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w">                  </span><span class="kd">::</span><span class="w"> </span><span class="n">error_message</span><span class="w"> </span><span class="c">! text description of error</span>
<span class="k">end type </span><span class="n">input_array_result_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>As with scalar input parameters, the C++ interface throws a
<code>skywalker::Exception</code> if it cannot retrieve a given input array parameter. And,
as in the scalar case, the Fortran interface also defines a subroutine that
tries to fetch an array parameter and halts with <code>STOP</code> on failure.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="22:1"><input checked="checked" id="__tabbed_22_1" name="__tabbed_22" type="radio" /><div class="tabbed-labels"><label for="__tabbed_22_1">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Retrieves the input array parameter with the given name, halting on</span>
<span class="c">! failure.</span>
<span class="k">subroutine </span><span class="n">input_get_array</span><span class="p">(</span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">input_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">   </span><span class="kd">::</span><span class="w"> </span><span class="n">input</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">),</span><span class="w"> </span><span class="k">allocatable</span><span class="p">,</span><span class="w"> </span><span class="k">dimension</span><span class="p">(:),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">inout</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">values</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>If you use this subroutine, you must deallocate the <code>values</code> array when you're
finished with it.</p>
<h3 id="computing-output-parameters-from-input-parameters">Computing output parameters from input parameters</h3>
<p>This is where you do your thing. Nobody knows your job better than you! Remember
that all input and output parameters are floating point numbers, so if your
work uses integer inputs or outputs, you must perform all necessary type
casting.</p>
<h3 id="setting-output-parameters">Setting output parameters</h3>
<p>When you've computed an output value from one or more input values, you'll want
to store that value by name in the ensemble member's output data. To do this,
you can call a function to set the value of a named output parameter.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="23:3"><input checked="checked" id="__tabbed_23_1" name="__tabbed_23" type="radio" /><input id="__tabbed_23_2" name="__tabbed_23" type="radio" /><input id="__tabbed_23_3" name="__tabbed_23" type="radio" /><div class="tabbed-labels"><label for="__tabbed_23_1">C</label><label for="__tabbed_23_2">C++</label><label for="__tabbed_23_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// This function sets a quantity with the given name and value within the given</span>
<span class="c1">// output instance. This operation cannot fail under normal circumstances.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">sw_output_set</span><span class="p">(</span><span class="n">sw_output_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">sw_real_t</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Output</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Sets a (real-valued) parameter with the given name. This operation</span>
<span class="w">  </span><span class="c1">// cannot fail under normal circumstances.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">Real</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Sets a quantity with the given name and value within the given output</span>
<span class="c">! instance. This operation cannot fail under normal circumstances.</span>
<span class="k">subroutine </span><span class="n">output_set</span><span class="p">(</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">value</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">output_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">output</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">     </span><span class="kd">::</span><span class="w"> </span><span class="k">value</span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The operation of setting an output parameter can't fail under normal
circumstances (sufficient memory, good hardware, etc). Skywalker handles all
the bookkeeping details.</p>
<h3 id="setting-output-array-parameters">Setting output array parameters</h3>
<p>Output array parameters work the same way as input array parameters: they're
just output values that share a common name. You can set an array-valued output
parameter by calling the appropriate function or subroutine.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="24:3"><input checked="checked" id="__tabbed_24_1" name="__tabbed_24" type="radio" /><input id="__tabbed_24_2" name="__tabbed_24" type="radio" /><input id="__tabbed_24_3" name="__tabbed_24" type="radio" /><div class="tabbed-labels"><label for="__tabbed_24_1">C</label><label for="__tabbed_24_2">C++</label><label for="__tabbed_24_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// This function sets an array of quantities with the given name and values</span>
<span class="c1">// within the given output instance. This operation cannot fail under normal</span>
<span class="c1">// circumstances.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">sw_output_set_array</span><span class="p">(</span><span class="n">sw_output_t</span><span class="w"> </span><span class="o">*</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">,</span><span class="w"></span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">sw_real_t</span><span class="w"> </span><span class="o">*</span><span class="n">values</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="o">*</span><span class="n">size</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Output</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Sets (real-valued) parameters in an array with the given name. This</span>
<span class="w">  </span><span class="c1">// operation cannot fail under normal circumstances.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">set</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Real</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&amp;</span><span class="n">values</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Sets an array of quantities with the given name and values to the given</span>
<span class="c">! output instance. This operation cannot fail under normal circumstances.</span>
<span class="k">subroutine </span><span class="n">output_set_array</span><span class="p">(</span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">output_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">output</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">name</span><span class="w"></span>
<span class="w">  </span><span class="kt">real</span><span class="p">(</span><span class="n">c_real</span><span class="p">),</span><span class="w"> </span><span class="k">target</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">),</span><span class="w"> </span><span class="k">dimension</span><span class="p">(:)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">values</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>As with scalar output parameters, the operation of setting an output array
parameter cannot fail under normal circumstances.</p>
<h2 id="writing-ensemble-output">Writing Ensemble Output</h2>
<p>At the end of your program, you can call a function to write all your ensemble
data to a Python module that be postprocessed.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="25:3"><input checked="checked" id="__tabbed_25_1" name="__tabbed_25" type="radio" /><input id="__tabbed_25_2" name="__tabbed_25" type="radio" /><input id="__tabbed_25_3" name="__tabbed_25" type="radio" /><div class="tabbed-labels"><label for="__tabbed_25_1">C</label><label for="__tabbed_25_2">C++</label><label for="__tabbed_25_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Writes input and output data within the ensemble to a Python module stored</span>
<span class="c1">// in the file with the given name.</span>
<span class="n">sw_write_result_t</span><span class="w"> </span><span class="nf">sw_ensemble_write</span><span class="p">(</span><span class="n">sw_ensemble_t</span><span class="w"> </span><span class="o">*</span><span class="n">ensemble</span><span class="p">,</span><span class="w"></span>
<span class="w">                                    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">module_filename</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Ensemble</span><span class="w"> </span><span class="k">final</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Writes input and output data within the ensemble to a Python module stored</span>
<span class="w">  </span><span class="c1">// in the file with the given name.</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">write</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">module_filename</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Writes input and output data within the ensemble to a Python module stored</span>
<span class="c">! in the file with the given name.</span>
<span class="k">function </span><span class="n">ensemble_write_module</span><span class="p">(</span><span class="n">ensemble</span><span class="p">,</span><span class="w"> </span><span class="n">module_filename</span><span class="p">)</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="p">(</span><span class="n">w_result</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">ensemble_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">module_filename</span><span class="w"></span>
<span class="w">  </span><span class="k">type</span><span class="p">(</span><span class="n">write_result_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">w_result</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>Because it attempts to write a file, this operation can fail. The C and Fortran
interfaces define a result type that can capture the information needed to
handle this failure.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="26:2"><input checked="checked" id="__tabbed_26_1" name="__tabbed_26" type="radio" /><input id="__tabbed_26_2" name="__tabbed_26" type="radio" /><div class="tabbed-labels"><label for="__tabbed_26_1">C</label><label for="__tabbed_26_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sw_write_result_t</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">error_code</span><span class="p">;</span><span class="w">            </span><span class="c1">// error code indicating success or failure</span>
<span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">error_message</span><span class="p">;</span><span class="w"> </span><span class="c1">// text description of error</span>
<span class="p">}</span><span class="w"> </span><span class="n">sw_write_result_t</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">type</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">write_result_t</span><span class="w"></span>
<span class="w">  </span><span class="kt">integer</span><span class="p">(</span><span class="kt">c_int</span><span class="p">)</span><span class="w">     </span><span class="kd">::</span><span class="w"> </span><span class="n">error_code</span><span class="w">    </span><span class="c">! error code indicating success or failure</span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">error_message</span><span class="w"> </span><span class="c">! text description of error</span>
<span class="k">end type </span><span class="n">write_result_t</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>As usual, the C++ interface throws a <code>skywalker::Exception</code> containing a
string identical to the <code>error_message</code> field found in the corresponding C and
Fortran result types. And, as usual, there is a Fortran subroutine that attempts
to write the ensemble data to the given file and halts on failure.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="27:1"><input checked="checked" id="__tabbed_27_1" name="__tabbed_27" type="radio" /><div class="tabbed-labels"><label for="__tabbed_27_1">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Writes input and output data within the ensemble to a Python module stored</span>
<span class="c">! in the file with the given name, halting on failure.</span>
<span class="k">subroutine </span><span class="n">ensemble_write</span><span class="p">(</span><span class="n">ensemble</span><span class="p">,</span><span class="w"> </span><span class="n">module_filename</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">ensemble_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble</span><span class="w"></span>
<span class="w">  </span><span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w">  </span><span class="kd">::</span><span class="w"> </span><span class="n">module_filename</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="cleanup">Cleanup</h3>
<p>After you've written the Python module, you should free the resources your
ensemble uses by destroying it. In C and Fortran, you can do this with a
simple function call.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="28:2"><input checked="checked" id="__tabbed_28_1" name="__tabbed_28" type="radio" /><input id="__tabbed_28_2" name="__tabbed_28" type="radio" /><div class="tabbed-labels"><label for="__tabbed_28_1">C</label><label for="__tabbed_28_2">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Destroys an ensemble, freeing its allocated resources. Use this at the end</span>
<span class="c1">// of your driver program, or when a fatal error has been encountered.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">sw_ensemble_free</span><span class="p">(</span><span class="n">sw_ensemble_t</span><span class="w"> </span><span class="o">*</span><span class="n">ensemble</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Destroys an ensemble, freeing all allocated resources.</span>
<span class="k">subroutine </span><span class="n">ensemble_free</span><span class="p">(</span><span class="n">ensemble</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">class</span><span class="p">(</span><span class="n">ensemble_t</span><span class="p">),</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">ensemble</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>In C++, you can simply <code>delete</code> the <code>Ensemble</code> pointer you obtained by calling
<code>skywalker::load_ensemble</code>, or you can use a smart pointer to store the
ensemble.</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>In addition to the types and interfaces we've described, there are a few extra
functions you might find handy in your Skywalker program.</p>
<h3 id="printing-a-banner">Printing a banner</h3>
<p>You can write a banner to the standard error strstream (<code>stderr</code> in C and C++)
with a call to the appropriate function.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="29:3"><input checked="checked" id="__tabbed_29_1" name="__tabbed_29" type="radio" /><input id="__tabbed_29_2" name="__tabbed_29" type="radio" /><input id="__tabbed_29_3" name="__tabbed_29" type="radio" /><div class="tabbed-labels"><label for="__tabbed_29_1">C</label><label for="__tabbed_29_2">C++</label><label for="__tabbed_29_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Prints a banner containing Skywalker&#39;s version info to stderr.</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">sw_print_banner</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">skywalker</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="c1">// Prints a banner containing Skywalker&#39;s version info to stderr.</span>
<span class="kt">void</span><span class="w"> </span><span class="n">print_banner</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="c1">// namespace skywalker</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c">! Prints a banner containing Skywalker&#39;s version info to stderr.</span>
<span class="k">subroutine </span><span class="n">print_banner</span><span class="p">()</span><span class="w"></span>
<span class="k">end subroutine</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>This banner prints out the version of Skywalker used by your program. This can
be helpful if you think you've encountered a bug in Skywalker, or if you're
trying to use a newer feature of the library.</p>
<h3 id="getting-the-ensembles-size">Getting the ensemble's size</h3>
<p>Sometimes it helps to know how many members an ensemble contains.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="30:3"><input checked="checked" id="__tabbed_30_1" name="__tabbed_30" type="radio" /><input id="__tabbed_30_2" name="__tabbed_30" type="radio" /><input id="__tabbed_30_3" name="__tabbed_30" type="radio" /><div class="tabbed-labels"><label for="__tabbed_30_1">C</label><label for="__tabbed_30_2">C++</label><label for="__tabbed_30_3">Fortran</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="c1">// Returns the size of the given ensemble.</span>
<span class="kt">size_t</span><span class="w"> </span><span class="nf">sw_ensemble_size</span><span class="p">(</span><span class="n">sw_ensemble_t</span><span class="o">*</span><span class="w"> </span><span class="n">ensemble</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Ensemble</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="w">  </span><span class="c1">// Returns the size of the ensemble (number of members).</span>
<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="p">...</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p>The ensemble's size is stored in the <code>size</code> field of the <code>ensemble_t</code>
derived type.</p>
</div>
</div>
</div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../output/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Output Format (Python)" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Output Format (Python)
            </div>
          </div>
        </a>
      
      
        
        <a href="../example/" class="md-footer__link md-footer__link--next" aria-label="Next: Example: Van der Waals Gas" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Example: Van der Waals Gas
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indices", "navigation.instant", "navigation.sections", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.361d90f1.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.289a2a4b.min.js"></script>
      
        <script src="../javascript/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>